/*!
 * vue-datetime v1.0.0-beta.6
 * (c) 2018 Mario Ju√°rez
 * Released under the MIT License.
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("luxon")):"function"==typeof define&&define.amd?define(["exports","luxon"],t):t(e.VueDatetime=e.VueDatetime||{},e.luxon)}(this,function(e,o){"use strict";var i=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=null),this.flow=e,this.endStatus=t,this.diversionNext=null};function n(e){return e.charAt(0).toUpperCase()+e.slice(1)}function t(e){var t=o.DateTime.fromISO(e).toUTC();return t.isValid?t:null}function a(e,t,i){return e&&i<e||t&&t<i}function s(e){return e<10?"0"+e:e}function m(e){return e.startOf("day")}i.prototype.step=function(e){return this.flow.length>e?this.flow[e]:this.endStatus},i.prototype.first=function(){return this.step(0)},i.prototype.next=function(e){if(this.diversionNext){var t=this.diversionNext;return this.diversionNext=null,t}return this.step(this.flow.indexOf(e)+1)},i.prototype.diversion=function(e){this.diversionNext=e};var r={render:function(){var i=this,e=i.$createElement,n=i._self._c||e;return n("div",{staticClass:"vdatetime-calendar"},[n("div",{staticClass:"vdatetime-calendar__navigation"},[n("div",{staticClass:"vdatetime-calendar__navigation--previous",on:{click:i.previousMonth}},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 61.3 102.8"}},[n("path",{attrs:{fill:"none",stroke:"#444","stroke-width":"14","stroke-miterlimit":"10",d:"M56.3 97.8L9.9 51.4 56.3 5"}})])]),i._v(" "),n("div",{staticClass:"vdatetime-calendar__current--month"},[i._v(i._s(i.monthName)+" "+i._s(i.newYear))]),i._v(" "),n("div",{staticClass:"vdatetime-calendar__navigation--next",on:{click:i.nextMonth}},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 61.3 102.8"}},[n("path",{attrs:{fill:"none",stroke:"#444","stroke-width":"14","stroke-miterlimit":"10",d:"M56.3 97.8L9.9 51.4 56.3 5"}})])])]),i._v(" "),n("div",{staticClass:"vdatetime-calendar__month"},[i._l(i.weekdays,function(e){return n("div",{staticClass:"vdatetime-calendar__month__weekday"},[i._v(i._s(e))])}),i._v(" "),i._l(i.days,function(t){return n("div",{staticClass:"vdatetime-calendar__month__day",class:{"vdatetime-calendar__month__day--selected":t.selected,"vdatetime-calendar__month__day--disabled":t.disabled},on:{click:function(e){i.selectDay(t)}}},[n("span",[n("span",[i._v(i._s(t.number))])])])})],2)])},staticRenderFns:[],props:{year:{type:Number,required:!0},month:{type:Number,required:!0},day:{type:Number,default:null},disabled:{type:Array},minDate:{type:o.DateTime,default:null},maxDate:{type:o.DateTime,default:null},weekStart:{type:Number,default:1}},data:function(){return{newDate:o.DateTime.fromObject({year:this.year,month:this.month,timeZone:"UTC"}),weekdays:function(e){--e<0&&(e=6);var t=o.Info.weekdays("short").map(function(e){return n(e)});return t=t.concat(t.splice(0,e))}(this.weekStart),months:o.Info.months().map(function(e){return n(e)})}},computed:{newYear:function(){return this.newDate.year},newMonth:function(){return this.newDate.month},monthName:function(){return this.months[this.newMonth-1]},days:function(){var u=this;return function(e,t,i){var n=o.DateTime.local(e,t,1),a=n.weekday-i;a<0&&(a+=7);var s=(i-n.weekday-n.daysInMonth)%7;return s<0&&(s+=7),new Array(n.daysInMonth+a+s).fill(null).map(function(e,t){return t+1<=a||t>=a+n.daysInMonth?null:t+1-a})}(this.newYear,this.newMonth,this.weekStart).map(function(e){return{number:e,selected:e&&u.year===u.newYear&&u.month===u.newMonth&&u.day===e,disabled:!e||(t=u.minDate,i=u.maxDate,n=u.newYear,a=u.newMonth,s=e,r=o.DateTime.fromObject({year:n,month:a,day:s}),t=t?m(t):null,i=i?m(i):null,t&&r<t||i&&i<r)};var t,i,n,a,s,r})}},methods:{selectDay:function(e){e.disabled||this.$emit("change",this.newYear,this.newMonth,e.number)},previousMonth:function(){this.newDate=this.newDate.minus({months:1})},nextMonth:function(){this.newDate=this.newDate.plus({months:1})}}},u={render:function(){var i=this,e=i.$createElement,n=i._self._c||e;return n("div",{class:{"vdatetime-time-picker":!0,"vdatetime-time-picker__with-suffix":i.use12Hour}},[n("div",{ref:"hourList",staticClass:"vdatetime-time-picker__list vdatetime-time-picker__list--hours"},i._l(i.hours,function(t){return n("div",{staticClass:"vdatetime-time-picker__item",class:{"vdatetime-time-picker__item--selected":t.selected,"vdatetime-time-picker__item--disabled":t.disabled},on:{click:function(e){i.selectHour(t)}}},[i._v(i._s(i.formatHour(t.number)))])})),i._v(" "),n("div",{ref:"minuteList",staticClass:"vdatetime-time-picker__list vdatetime-time-picker__list--minutes"},i._l(i.minutes,function(t){return n("div",{staticClass:"vdatetime-time-picker__item",class:{"vdatetime-time-picker__item--selected":t.selected,"vdatetime-time-picker__item--disabled":t.disabled},on:{click:function(e){i.selectMinute(t)}}},[i._v(i._s(t.number))])})),i._v(" "),i.use12Hour?n("div",{ref:"suffixList",staticClass:"vdatetime-time-picker__list vdatetime-time-picker__list--suffix"},[n("div",{staticClass:"vdatetime-time-picker__item",class:{"vdatetime-time-picker__item--selected":i.hour<12},on:{click:function(e){i.selectSuffix("am")}}},[i._v("am")]),i._v(" "),n("div",{staticClass:"vdatetime-time-picker__item",class:{"vdatetime-time-picker__item--selected":12<=i.hour},on:{click:function(e){i.selectSuffix("pm")}}},[i._v("pm")])]):i._e()])},staticRenderFns:[],props:{hour:{type:Number,required:!0},minute:{type:Number,required:!0},use12Hour:{type:Boolean,default:!1},hourStep:{type:Number,default:1},minuteStep:{type:Number,default:1},minTime:{type:String,default:null},maxTime:{type:String,default:null}},computed:{hours:function(){var i,t=this;return(i=this.hourStep,new Array(Math.ceil(24/i)).fill(null).map(function(e,t){return t*i})).filter(function(e){return!t.use12Hour||(t.hour<12?e<12:12<=e)}).map(function(e){return{number:s(e),selected:e===t.hour,disabled:a(t.minHour,t.maxHour,e)}})},minutes:function(){var i,t=this;return(i=this.minuteStep,new Array(Math.ceil(60/i)).fill(null).map(function(e,t){return t*i})).map(function(e){return{number:s(e),selected:e===t.minute,disabled:a(t.minMinute,t.maxMinute,e)}})},minHour:function(){return this.minTime?parseInt(this.minTime.split(":")[0]):null},minMinute:function(){return this.minTime&&this.minHour===this.hour?parseInt(this.minTime.split(":")[1]):null},maxHour:function(){return this.maxTime?parseInt(this.maxTime.split(":")[0]):null},maxMinute:function(){return this.maxTime&&this.maxHour===this.hour?parseInt(this.maxTime.split(":")[1]):null}},methods:{selectHour:function(e){e.disabled||this.$emit("change",{hour:parseInt(e.number)})},selectMinute:function(e){e.disabled||this.$emit("change",{minute:parseInt(e.number)})},selectSuffix:function(e){"am"===e&&12<=this.hour&&this.$emit("change",{hour:parseInt(this.hour-12),suffixTouched:!0}),"pm"===e&&this.hour<12&&this.$emit("change",{hour:parseInt(this.hour+12),suffixTouched:!0})},formatHour:function(e){var t=Number(e);return this.use12Hour?0===t?12:12<t?t-12:t:e}},mounted:function(){var e=this.$refs.hourList.querySelector(".vdatetime-time-picker__item--selected"),t=this.$refs.minuteList.querySelector(".vdatetime-time-picker__item--selected");this.$refs.hourList.scrollTop=e?e.offsetTop-250:0,this.$refs.minuteList.scrollTop=t?t.offsetTop-250:0}},c={render:function(){var i=this,e=i.$createElement,n=i._self._c||e;return n("div",{staticClass:"vdatetime-year-picker"},[n("div",{ref:"yearList",staticClass:"vdatetime-year-picker__list vdatetime-year-picker__list"},i._l(i.years,function(t){return n("div",{staticClass:"vdatetime-year-picker__item",class:{"vdatetime-year-picker__item--selected":t.selected},on:{click:function(e){i.select(t.number)}}},[i._v(i._s(t.number))])}))])},staticRenderFns:[],props:{year:{type:Number,required:!0}},computed:{years:function(){var i,t=this;return(i=this.year,new Array(201).fill(null).map(function(e,t){return i-100+t})).map(function(e){return{number:e,selected:e===t.year}})}},methods:{select:function(e){this.$emit("change",parseInt(e))},scrollToCurrent:function(){var e=this.$refs.yearList.querySelector(".vdatetime-year-picker__item--selected");this.$refs.yearList.scrollTop=e?e.offsetTop-250:0}},mounted:function(){this.scrollToCurrent()},updated:function(){this.scrollToCurrent()}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vdatetime"},[i("input",t._g(t._b({staticClass:"vdatetime-input",class:t.inputClass,attrs:{id:t.inputId,type:"text"},domProps:{value:t.inputValue},on:{click:t.open,focus:t.open}},"input",t.$attrs,!1),t.$listeners)),t._v(" "),t.hiddenName?i("input",{attrs:{type:"hidden",name:t.hiddenName},domProps:{value:t.value}}):t._e(),t._v(" "),i("transition-group",{directives:[{name:"dom-portal",rawName:"v-dom-portal"}],attrs:{name:"vdatetime-fade",tag:"div"}},[t.isOpen?i("div",{key:"overlay",staticClass:"vdatetime-overlay",on:{click:function(e){return e.target!==e.currentTarget?null:t.cancel(e)}}}):t._e(),t._v(" "),t.isOpen?i("datetime-popup",{key:"popup",attrs:{type:t.type,datetime:t.popupDate,phrases:t.phrases,"use12-hour":t.use12Hour,"hour-step":t.hourStep,"minute-step":t.minuteStep,"min-datetime":t.popupMinDatetime,"max-datetime":t.popupMaxDatetime,auto:t.auto,"week-start":t.weekStart},on:{confirm:t.confirm,cancel:t.cancel}}):t._e()],1)],1)},staticRenderFns:[],components:{DatetimePopup:{render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vdatetime-popup"},[i("div",{staticClass:"vdatetime-popup__header"},[i("div",{staticClass:"vdatetime-popup__year",on:{click:e.showYear}},[e._v(e._s(e.year))]),e._v(" "),i("div",{staticClass:"vdatetime-popup__date"},[e._v(e._s(e.dateFormatted))])]),e._v(" "),i("div",{staticClass:"vdatetime-popup__body"},["year"===e.step?i("datetime-year-picker",{attrs:{year:e.year},on:{change:e.onChangeYear}}):e._e(),e._v(" "),"date"===e.step?i("datetime-calendar",{attrs:{year:e.year,month:e.month,day:e.day,"min-date":e.minDatetime,"max-date":e.maxDatetime,"week-start":e.weekStart},on:{change:e.onChangeDate}}):e._e(),e._v(" "),"time"===e.step?i("datetime-time-picker",{attrs:{hour:e.hour,minute:e.minute,"use12-hour":e.use12Hour,"hour-step":e.hourStep,"minute-step":e.minuteStep,"min-time":e.minTime,"max-time":e.maxTime},on:{change:e.onChangeTime}}):e._e()],1),e._v(" "),i("div",{staticClass:"vdatetime-popup__actions"},[i("div",{staticClass:"vdatetime-popup__actions__button vdatetime-popup__actions__button--cancel",on:{click:e.cancel}},[e._v(e._s(e.phrases.cancel))]),e._v(" "),i("div",{staticClass:"vdatetime-popup__actions__button vdatetime-popup__actions__button--confirm",on:{click:e.confirm}},[e._v(e._s(e.phrases.ok))])])])},staticRenderFns:[],components:{DatetimeCalendar:r,DatetimeTimePicker:u,DatetimeYearPicker:c},props:{datetime:{type:o.DateTime,required:!0},phrases:{type:Object,default:function(){return{cancel:"Cancel",ok:"Ok"}}},type:{type:String,default:"date"},use12Hour:{type:Boolean,default:!1},hourStep:{type:Number,default:1},minuteStep:{type:Number,default:1},minDatetime:{type:o.DateTime,default:null},maxDatetime:{type:o.DateTime,default:null},auto:{type:Boolean,default:!1},weekStart:{type:Number,default:1}},data:function(){var e=function(e){var t=[];switch(e){case"datetime":t=["date","time"];break;default:t=["date"]}return new i(t,"end")}(this.type);return{newDatetime:this.datetime,flow:e,step:e.first(),timePartsTouched:[]}},created:function(){document.addEventListener("keydown",this.onKeyDown)},beforeDestroy:function(){document.removeEventListener("keydown",this.onKeyDown)},computed:{year:function(){return this.newDatetime.year},month:function(){return this.newDatetime.month},day:function(){return this.newDatetime.day},hour:function(){return this.newDatetime.hour},minute:function(){return this.newDatetime.minute},dateFormatted:function(){return this.newDatetime.toLocaleString({month:"long",day:"numeric"})},minTime:function(){return this.minDatetime&&this.minDatetime.year===this.year&&this.minDatetime.month===this.month&&this.minDatetime.day===this.day?this.minDatetime.toFormat("HH:mm"):null},maxTime:function(){return this.maxDatetime&&this.maxDatetime.year===this.year&&this.maxDatetime.month===this.month&&this.maxDatetime.day===this.day?this.maxDatetime.toFormat("HH:mm"):null}},methods:{nextStep:function(){this.step=this.flow.next(this.step),this.timePartsTouched=[],"end"===this.step&&this.$emit("confirm",this.newDatetime)},showYear:function(){this.step="year",this.flow.diversion("date")},confirm:function(){this.nextStep()},cancel:function(){this.$emit("cancel")},onChangeYear:function(e){this.newDatetime=this.newDatetime.set({year:e}),this.auto&&this.nextStep()},onChangeDate:function(e,t,i){this.newDatetime=this.newDatetime.set({year:e,month:t,day:i}),this.auto&&this.nextStep()},onChangeTime:function(e){var t=e.hour,i=e.minute;e.suffixTouched&&(this.timePartsTouched.suffix=!0),Number.isInteger(t)&&(this.newDatetime=this.newDatetime.set({hour:t}),this.timePartsTouched.hour=!0),Number.isInteger(i)&&(this.newDatetime=this.newDatetime.set({minute:i}),this.timePartsTouched.minute=!0),this.auto&&this.timePartsTouched.hour&&this.timePartsTouched.minute&&(this.timePartsTouched.suffix||!this.use12Hour)&&this.nextStep()},onKeyDown:function(e){switch(e.keyCode){case 27:case 9:this.cancel();break;case 13:this.nextStep()}}}}},props:{value:{type:String},valueZone:{type:String,default:"UTC"},inputId:{type:String,default:""},inputClass:{type:String,default:""},hiddenName:{type:String},zone:{type:String,default:"local"},format:{type:[Object,String],default:null},type:{type:String,default:"date"},phrases:{type:Object,default:function(){return{cancel:"Cancel",ok:"Ok"}}},use12Hour:{type:Boolean,default:!1},hourStep:{type:Number,default:1},minuteStep:{type:Number,default:1},minDatetime:{type:String,default:null},maxDatetime:{type:String,default:null},auto:{type:Boolean,default:!1},weekStart:{type:Number,default:function(){return function(){var t;try{t=require("weekstart")}catch(e){t=window.weekstart}var e=t?t.getWeekStartByLocale(o.Settings.defaultLocale):1;return 0===e?7:e}()}}},data:function(){return{isOpen:!1,datetime:t(this.value)}},watch:{value:function(e){this.datetime=t(e)}},created:function(){this.emitInput()},computed:{inputValue:function(){var e=this.format||("date"===this.type?o.DateTime.DATE_MED:o.DateTime.DATETIME_MED);return"string"==typeof e?this.datetime?o.DateTime.fromISO(this.datetime).setZone(this.zone).toFormat(e):"":this.datetime?this.datetime.setZone(this.zone).toLocaleString(e):""},popupDate:function(){return this.datetime?this.datetime.setZone(this.zone):this.newPopupDatetime()},popupMinDatetime:function(){return this.minDatetime?o.DateTime.fromISO(this.minDatetime):null},popupMaxDatetime:function(){return this.maxDatetime?o.DateTime.fromISO(this.maxDatetime):null}},methods:{emitInput:function(){var e=this.datetime?this.datetime.setZone(this.valueZone):null;e&&"date"===this.type&&(e=m(e)),this.$emit("input",e?e.toISO():"")},open:function(e){e.target.blur(),this.isOpen=!0},close:function(){this.isOpen=!1,this.$emit("close")},confirm:function(e){this.datetime=e.toUTC(),this.emitInput(),this.close()},cancel:function(){this.close()},newPopupDatetime:function(){var e=o.DateTime.utc().setZone(this.zone).set({seconds:0,milliseconds:0});if(1===this.minuteStep)return e;var t=Math.round(e.minute/this.minuteStep)*this.minuteStep;return 60===t?e.plus({hours:1}).set({minute:0}):e.set({minute:t})}}};function l(e){return void 0===e&&(e=document.body),!0===e?document.body:e instanceof window.Node?e:document.querySelector(e)}var h=new Map,p={inserted:function(e,t,i){var n=t.value,a=e.parentNode,s=document.createComment(""),r=!1;!1!==n&&(a.replaceChild(s,e),l(n).appendChild(e),r=!0),h.has(e)||h.set(e,{parentNode:a,home:s,hasMovedOut:r})},componentUpdated:function(e,t){var i=t.value,n=h.get(e),a=n.parentNode,s=n.home,r=n.hasMovedOut;!r&&i?(a.replaceChild(s,e),l(i).appendChild(e),h.set(e,Object.assign({},h.get(e),{hasMovedOut:!0}))):r&&!1===i?(a.replaceChild(e,s),h.set(e,Object.assign({},h.get(e),{hasMovedOut:!1}))):i&&l(i).appendChild(e)},unbind:function(e,t){h.delete(e)}};function f(e,t){void 0===t&&(t={});var i=t.name;void 0===i&&(i="dom-portal"),e.directive(i,p)}f.version="0.1.6","undefined"!=typeof window&&window.Vue&&window.Vue.use(f);var v=f;function _(e){e.component("datetime",d)}"undefined"!=typeof window&&window.Vue&&(window.Vue.use(_),window.Vue.use(v));e.default=_,e.Datetime=d,e.version="1.0.0-beta.6",Object.defineProperty(e,"__esModule",{value:!0})});